<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeScan - تحليل سلامة المنتجات وفحص أصوات المحرك</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <style>
        :root {
            --primary: #2c7be5;
            --primary-dark: #1a68d1;
            --secondary: #00d97e;
            --danger: #e63757;
            --warning: #f6c343;
            --light: #f9fafd;
            --dark: #12263f;
            --gray: #6e84a3;
            --border-radius: 12px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
        }

        .logo-text span {
            color: var(--primary);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
        }

        nav a:hover {
            color: var(--primary);
        }

        .language-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .language-selector i {
            color: var(--gray);
        }

        .mobile-menu {
            display: none;
            font-size: 24px;
            cursor: pointer;
        }

        /* Video Background */
        .video-background {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        .video-background video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translateX(-50%) translateY(-50%);
            z-index: -1;
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(18, 38, 63, 0.7);
            z-index: 0;
        }

        /* Hero Section */
        .hero {
            position: relative;
            padding: 80px 0;
            text-align: center;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            padding: 0 20px;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.9);
            max-width: 700px;
            margin: 0 auto 40px;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .btn {
            padding: 14px 30px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(44, 123, 229, 0.3);
        }

        .btn-outline {
            background-color: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .features {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
        }

        .feature {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 280px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .feature:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 28px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .feature h3 {
            margin-bottom: 15px;
            font-size: 20px;
            color: white;
        }

        .feature p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 15px;
        }

        /* Scroll Down Indicator */
        .scroll-down {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 14px;
            z-index: 2;
            animation: bounce 2s infinite;
            cursor: pointer;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            40% {
                transform: translateX(-50%) translateY(-10px);
            }
            60% {
                transform: translateX(-50%) translateY(-5px);
            }
        }

        /* Upload Section */
        .upload-section {
            padding: 80px 0;
            background-color: white;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-title h2 {
            font-size: 36px;
            margin-bottom: 15px;
        }

        .section-title p {
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
        }

        .upload-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .upload-options {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .upload-option {
            padding: 15px 30px;
            border-radius: var(--border-radius);
            background: white;
            border: 2px solid #e3ebf6;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .upload-option.active {
            border-color: var(--primary);
            background: rgba(44, 123, 229, 0.05);
        }

        .upload-area {
            width: 100%;
            max-width: 600px;
            border: 2px dashed #d1ddec;
            border-radius: var(--border-radius);
            padding: 60px 40px;
            text-align: center;
            transition: var(--transition);
            background: #f9fafd;
            position: relative;
        }

        .upload-area.active {
            border-color: var(--primary);
            background: rgba(44, 123, 229, 0.03);
        }

        .upload-area i {
            font-size: 60px;
            color: var(--gray);
            margin-bottom: 20px;
        }

        .upload-area h3 {
            margin-bottom: 15px;
        }

        .upload-area p {
            color: var(--gray);
            margin-bottom: 20px;
        }

        .upload-btn {
            background: var(--primary);
            color: white;
            padding: 12px 30px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: inline-block;
            transition: var(--transition);
        }

        .upload-btn:hover {
            background: var(--primary-dark);
        }

        .camera-options {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .camera-btn {
            padding: 10px 20px;
            border-radius: var(--border-radius);
            background: white;
            border: 1px solid #e3ebf6;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .camera-btn:hover {
            background: #f5f7fb;
        }

        /* Camera and Audio Recording Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }

        .camera-preview, .audio-recorder {
            width: 100%;
            margin: 20px 0;
        }

        #cameraVideo, #audioVisualizer {
            width: 100%;
            border-radius: var(--border-radius);
            background: var(--light);
        }

        #cameraVideo {
            height: 300px;
            object-fit: cover;
        }

        #audioVisualizer {
            height: 150px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
        }

        .recording-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .record-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stop-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .capture-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .recording-timer {
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
            color: var(--danger);
        }

        /* Results Section */
        .results-section {
            padding: 80px 0;
            display: none;
        }

        .result-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .result-header {
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e3ebf6;
        }

        .result-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .result-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .result-icon.safe {
            background: rgba(0, 217, 126, 0.1);
            color: var(--secondary);
        }

        .result-icon.caution {
            background: rgba(246, 195, 67, 0.1);
            color: var(--warning);
        }

        .result-icon.risk {
            background: rgba(230, 55, 87, 0.1);
            color: var(--danger);
        }

        .result-info h3 {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .result-info p {
            color: var(--gray);
        }

        .result-score {
            text-align: center;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            margin: 0 auto 10px;
        }

        .score-circle.safe {
            background: rgba(0, 217, 126, 0.1);
            color: var(--secondary);
            border: 4px solid var(--secondary);
        }

        .score-circle.caution {
            background: rgba(246, 195, 67, 0.1);
            color: var(--warning);
            border: 4px solid var(--warning);
        }

        .score-circle.risk {
            background: rgba(230, 55, 87, 0.1);
            color: var(--danger);
            border: 4px solid var(--danger);
        }

        .result-body {
            padding: 30px;
        }

        .result-summary {
            margin-bottom: 30px;
        }

        .result-summary h4 {
            margin-bottom: 15px;
            font-size: 18px;
        }

        .summary-text {
            background: #f9fafd;
            padding: 20px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary);
        }

        .expired-warning {
            background: rgba(230, 55, 87, 0.05);
            border-left: 4px solid var(--danger);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .expired-warning i {
            color: var(--danger);
            font-size: 24px;
        }

        .expired-warning h4 {
            margin-bottom: 5px;
            color: var(--danger);
        }

        .result-details {
            margin-bottom: 30px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #e3ebf6;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-safe {
            background: rgba(0, 217, 126, 0.1);
            color: var(--secondary);
        }

        .status-caution {
            background: rgba(246, 195, 67, 0.1);
            color: var(--warning);
        }

        .status-risk {
            background: rgba(230, 55, 87, 0.1);
            color: var(--danger);
        }

        .expandable-section {
            margin-top: 30px;
        }

        .expand-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f9fafd;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .expand-toggle:hover {
            background: #f0f4fa;
        }

        .expand-content {
            padding: 20px;
            background: white;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            display: none;
        }

        .recommendations {
            margin-top: 40px;
        }

        .recommendations h3 {
            margin-bottom: 20px;
        }

        .rec-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .rec-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .rec-card:hover {
            transform: translateY(-5px);
        }

        .rec-image {
            height: 150px;
            background: #e3ebf6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }

        .rec-content {
            padding: 20px;
        }

        .rec-content h4 {
            margin-bottom: 10px;
        }

        .rec-content p {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 15px;
        }

        .rec-action {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .rec-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
        }

        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        /* Loading Indicator */
        .loading {
            display: none;
            text-align: center;
            padding: 60px 0;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #e3ebf6;
            border-top: 6px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 60px 0 30px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 18px;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column li {
            margin-bottom: 10px;
        }

        .footer-column a {
            color: #9fb4d6;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-column a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #2d3e57;
            color: #9fb4d6;
            font-size: 14px;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .features {
                flex-wrap: wrap;
            }
            
            .hero h1 {
                font-size: 36px;
            }
            
            .hero p {
                font-size: 18px;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }
            
            nav {
                order: 3;
                width: 100%;
                margin-top: 15px;
                display: none;
            }
            
            nav ul {
                flex-direction: column;
                gap: 15px;
            }
            
            .mobile-menu {
                display: block;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .upload-options {
                flex-direction: column;
            }
            
            .result-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .result-actions {
                flex-direction: column;
            }

            .video-background {
                height: 70vh;
            }

            .hero {
                height: 70vh;
            }

            .recording-controls {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 28px;
            }
            
            .hero p {
                font-size: 16px;
            }
            
            .feature {
                width: 100%;
                max-width: 280px;
            }

            .video-background {
                height: 60vh;
            }

            .hero {
                height: 60vh;
            }
        }

        /* Language Support */
        [lang="en"] {
            direction: ltr;
            text-align: left;
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }
        
        .mt-20 {
            margin-top: 20px;
        }
        
        .mb-20 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="logo-text">Safe<span>Scan</span></div>
                </div>
                
                <nav>
                    <ul>
                        <li><a href="#home">الرئيسية</a></li>
                        <li><a href="#upload">المسح</a></li>
                        <li><a href="#about">من نحن</a></li>
                        <li><a href="#contact">اتصل بنا</a></li>
                    </ul>
                </nav>
                
                <div class="language-selector" id="languageToggle">
                    <i class="fas fa-globe"></i>
                    <span>العربية</span>
                </div>
                
                <div class="mobile-menu">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Video Background and Hero Section -->
    <div class="video-background" id="home">
        <video autoplay muted loop playsinline>
            <source src="videos/السلامة.mp4" type="video/mp4">
            <!-- Fallback image if video doesn't load -->
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800' viewBox='0 0 1200 800'%3E%3Crect fill='%2312263f' width='1200' height='800'/%3E%3C/svg%3E" alt="SafeScan Background">
        </video>
        <div class="video-overlay"></div>
        
        <section class="hero">
            <div class="hero-content">
                <h1>تحليل السلامة باستخدام الذكاء الاصطناعي</h1>
                <p>قم برفع صورة المنتج أو تسجيل صوت محرك سيارتك للحصول على تحليل فوري للسلامة!</p>
                
                <div class="hero-buttons">
                    <button class="btn btn-primary" id="scanProductBtn">
                        <i class="fas fa-cube"></i> مسح منتج
                    </button>
                    <button class="btn btn-outline" id="scanCarBtn">
                        <i class="fas fa-car"></i> تحليل صوت السيارة
                    </button>
                </div>
                
                <div class="features">
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-pills"></i>
                        </div>
                        <h3>سلامة المنتجات</h3>
                        <p>تحقق من المكونات، المواد المسببة للحساسية، وتواريخ انتهاء الصلاحية للأغذية والمشروبات ومستحضرات التجميل.</p>
                    </div>
                    
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <h3>تشخيص السيارات</h3>
                        <p>تحليل أصوات المحرك للكشف عن المشاكل الميكانيكية المحتملة قبل أن تصبح خطيرة.</p>
                    </div>
                </div>
            </div>
            
            <div class="scroll-down">
                <i class="fas fa-chevron-down"></i>
                <span>مرر للأسفل</span>
            </div>
        </section>
    </div>

    <!-- Upload Section -->
    <section class="upload-section" id="upload">
        <div class="container">
            <div class="section-title">
                <h2>رفع الملف للتحليل</h2>
                <p>اختر نوع التحليل وارفع صورة أو ملف صوتي للحصول على تقييم فوري للسلامة</p>
            </div>
            
            <div class="upload-container">
                <div class="upload-options">
                    <div class="upload-option active" id="productOption">
                        <i class="fas fa-cube"></i>
                        <span>تحليل المنتج</span>
                    </div>
                    <div class="upload-option" id="carOption">
                        <i class="fas fa-car"></i>
                        <span>تحليل صوت السيارة</span>
                    </div>
                </div>
                
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3 id="uploadTitle">رفع صورة المنتج</h3>
                    <p id="uploadDescription">اسحب وأفلت صورة المنتج هنا أو انقر للتصفح</p>
                    <div class="upload-btn" id="browseBtn">تصفح الملفات</div>
                    <input type="file" id="fileInput" accept="image/*,audio/*" style="display: none;">
                    
                    <div class="camera-options">
                        <div class="camera-btn" id="cameraBtn">
                            <i class="fas fa-camera"></i> التقاط صورة
                        </div>
                        <div class="camera-btn" id="micBtn">
                            <i class="fas fa-microphone"></i> تسجيل صوت
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Camera Modal -->
    <div class="modal" id="cameraModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="cameraModalTitle">التقاط صورة</h3>
                <button class="close-modal" id="closeCameraModal">&times;</button>
            </div>
            <div class="camera-preview">
                <video id="cameraVideo" autoplay playsinline></video>
            </div>
            <div class="recording-controls">
                <button class="capture-btn" id="captureBtn">
                    <i class="fas fa-camera"></i> التقاط
                </button>
            </div>
            <canvas id="cameraCanvas" style="display: none;"></canvas>
        </div>
    </div>

    <!-- Audio Recording Modal -->
    <div class="modal" id="audioModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تسجيل صوت المحرك</h3>
                <button class="close-modal" id="closeAudioModal">&times;</button>
            </div>
            <div class="audio-recorder">
                <canvas id="audioVisualizer"></canvas>
                <div class="recording-timer" id="recordingTimer">00:00</div>
            </div>
            <div class="recording-controls">
                <button class="record-btn" id="recordBtn">
                    <i class="fas fa-microphone"></i> بدء التسجيل
                </button>
                <button class="stop-btn" id="stopBtn" disabled>
                    <i class="fas fa-stop"></i> إيقاف
                </button>
            </div>
            <audio id="recordedAudio" controls style="display: none; width: 100%; margin-top: 20px;"></audio>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div class="loading" id="loadingIndicator">
        <div class="container">
            <div class="spinner"></div>
            <h3>جاري تحليل ملفك...</h3>
            <p>قد يستغرق هذا بضع لحظات</p>
        </div>
    </div>

    <!-- Results Section -->
    <section class="results-section" id="resultsSection">
        <div class="container">
            <!-- Product Analysis Result -->
            <div class="result-card" id="productResult">
                <div class="result-header">
                    <div class="result-title">
                        <div class="result-icon risk" id="resultMainIcon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="result-info">
                            <h3>تحليل سلامة المنتج</h3>
                            <p>تم التحليل لـ: <span id="productName">شوكولاتة</span></p>
                        </div>
                    </div>
                    <div class="result-score">
                        <div class="score-circle risk" id="safetyScoreCircle">
                            <span id="safetyScore">42</span>
                        </div>
                        <p>درجة السلامة</p>
                    </div>
                </div>
                
                <div class="result-body">
                    <div class="result-summary">
                        <h4>الملخص</h4>
                        <div class="summary-text" id="summaryText">
                            هذا المنتج منتهي الصلاحية وقد يشكل خطراً على الصحة. يرجى عدم تناوله والتخلص منه فوراً.
                        </div>
                        
                        <div class="expired-warning" id="expiredWarning">
                            <i class="fas fa-exclamation-circle"></i>
                            <div>
                                <h4>تحذير: المنتج منتهي الصلاحية</h4>
                                <p>تاريخ انتهاء الصلاحية: <strong>01/2023</strong> (منتهي منذ 10 أشهر)</p>
                                <p class="mt-20">تناول المنتجات المنتهية الصلاحية قد يسبب مشاكل صحية خطيرة.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-details">
                        <h4>النتائج الرئيسية</h4>
                        <div class="detail-item">
                            <div class="detail-info">
                                <i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i>
                                <span>حالة الصلاحية</span>
                            </div>
                            <div class="detail-status status-risk">منتهي الصلاحية</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-info">
                                <i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i>
                                <span>تحذير الحساسية</span>
                            </div>
                            <div class="detail-status status-caution">يحتوي على حليب ومكسرات</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-info">
                                <i class="fas fa-check-circle" style="color: var(--secondary);"></i>
                                <span>المكونات الضارة</span>
                            </div>
                            <div class="detail-status status-safe">لم يتم اكتشاف أي منها</div>
                        </div>
                    </div>
                    
                    <div class="expandable-section">
                        <div class="expand-toggle" id="ingredientToggle">
                            <span>عرض تحليل المكونات التفصيلي</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="expand-content" id="ingredientContent">
                            <h4>درجات سلامة المكونات</h4>
                            <div class="detail-item">
                                <span>سكر</span>
                                <div class="detail-status status-safe">85/100</div>
                            </div>
                            <div class="detail-item">
                                <span>زيت النخيل</span>
                                <div class="detail-status status-caution">65/100</div>
                            </div>
                            <div class="detail-item">
                                <span>مسحوق الكاكاو</span>
                                <div class="detail-status status-safe">88/100</div>
                            </div>
                            <div class="detail-item">
                                <span>مستحلب (ليسيثين الصويا)</span>
                                <div class="detail-status status-caution">70/100</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="recommendations">
                        <h3>بدائل موصى بها</h3>
                        <div class="rec-cards">
                            <div class="rec-card">
                                <div class="rec-image">
                                    <i class="fas fa-cookie"></i>
                                </div>
                                <div class="rec-content">
                                    <h4>شوكولاتة ماركة X</h4>
                                    <p>صلاحية حتى 06/2024، خالية من الزيوت المهدرجة</p>
                                    <div class="rec-action">
                                        <a href="#" class="rec-link">عرض التفاصيل</a>
                                        <i class="fas fa-qrcode"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="rec-card">
                                <div class="rec-image">
                                    <i class="fas fa-cookie-bite"></i>
                                </div>
                                <div class="rec-content">
                                    <h4>شوكولاتة عضوية</h4>
                                    <p>مكونات طبيعية 100%، مناسبة للحساسيات</p>
                                    <div class="rec-action">
                                        <a href="#" class="rec-link">عرض التفاصيل</a>
                                        <i class="fas fa-qrcode"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-actions">
                        <button class="btn btn-outline" id="shareResultBtn">
                            <i class="fas fa-share-alt"></i> مشاركة النتائج
                        </button>
                        <button class="btn btn-primary" id="newAnalysisBtn">
                            <i class="fas fa-redo"></i> تحليل جديد
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>SafeScan</h3>
                    <ul>
                        <li><a href="#">من نحن</a></li>
                        <li><a href="#">كيف تعمل</a></li>
                        <li><a href="#">تكنولوجيتنا</a></li>
                        <li><a href="#">الوظائف</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>الخدمات</h3>
                    <ul>
                        <li><a href="#">سلامة المنتجات</a></li>
                        <li><a href="#">تشخيص السيارات</a></li>
                        <li><a href="#">واجهة برمجة التطبيقات</a></li>
                        <li><a href="#">حلول المؤسسات</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>الدعم</h3>
                    <ul>
                        <li><a href="#">مركز المساعدة</a></li>
                        <li><a href="#">اتصل بنا</a></li>
                        <li><a href="#">سياسة الخصوصية</a></li>
                        <li><a href="#">شروط الخدمة</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>تواصل معنا</h3>
                    <ul>
                        <li><a href="#">تويتر</a></li>
                        <li><a href="#">فيسبوك</a></li>
                        <li><a href="#">إنستغرام</a></li>
                        <li><a href="#">لينكدإن</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>© 2023 SafeScan. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "your-api-key-here",
            authDomain: "safescan-app.firebaseapp.com",
            projectId: "safescan-app",
            storageBucket: "safescan-app.appspot.com",
            messagingSenderId: "123456789",
            appId: "your-app-id-here"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const storage = firebase.storage();

        // API Keys
        const GEMINI_API_KEY = "AIzaSyB-QYxLBdVmw_Tid1u-xNmr5wH5DT_SnH8";
        const IMAGE_UPLOAD_KEY = "688477478b00303ff7023a3cb80f0943";

        // DOM Elements
        const productOption = document.getElementById('productOption');
        const carOption = document.getElementById('carOption');
        const uploadArea = document.getElementById('uploadArea');
        const uploadTitle = document.getElementById('uploadTitle');
        const uploadDescription = document.getElementById('uploadDescription');
        const browseBtn = document.getElementById('browseBtn');
        const fileInput = document.getElementById('fileInput');
        const cameraBtn = document.getElementById('cameraBtn');
        const micBtn = document.getElementById('micBtn');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const resultsSection = document.getElementById('resultsSection');
        const productResult = document.getElementById('productResult');
        const scanProductBtn = document.getElementById('scanProductBtn');
        const scanCarBtn = document.getElementById('scanCarBtn');
        const ingredientToggle = document.getElementById('ingredientToggle');
        const ingredientContent = document.getElementById('ingredientContent');
        const newAnalysisBtn = document.getElementById('newAnalysisBtn');
        const shareResultBtn = document.getElementById('shareResultBtn');
        const languageToggle = document.getElementById('languageToggle');
        const resultMainIcon = document.getElementById('resultMainIcon');
        const safetyScoreCircle = document.getElementById('safetyScoreCircle');
        const safetyScore = document.getElementById('safetyScore');
        const summaryText = document.getElementById('summaryText');
        const expiredWarning = document.getElementById('expiredWarning');
        const productName = document.getElementById('productName');
        const scrollDown = document.querySelector('.scroll-down');

        // Camera and Audio Elements
        const cameraModal = document.getElementById('cameraModal');
        const audioModal = document.getElementById('audioModal');
        const cameraVideo = document.getElementById('cameraVideo');
        const cameraCanvas = document.getElementById('cameraCanvas');
        const captureBtn = document.getElementById('captureBtn');
        const closeCameraModal = document.getElementById('closeCameraModal');
        const closeAudioModal = document.getElementById('closeAudioModal');
        const recordBtn = document.getElementById('recordBtn');
        const stopBtn = document.getElementById('stopBtn');
        const recordedAudio = document.getElementById('recordedAudio');
        const recordingTimer = document.getElementById('recordingTimer');
        const audioVisualizer = document.getElementById('audioVisualizer');

        // Global variables
        let currentAnalysisType = 'product';
        let currentLanguage = 'ar';
        let stream = null;
        let mediaRecorder = null;
        let audioChunks = [];
        let recordingInterval = null;
        let recordingSeconds = 0;

        // Event Listeners
        productOption.addEventListener('click', () => switchAnalysisType('product'));
        carOption.addEventListener('click', () => switchAnalysisType('car'));
        scanProductBtn.addEventListener('click', () => {
            switchAnalysisType('product');
            document.getElementById('upload').scrollIntoView({ behavior: 'smooth' });
        });
        scanCarBtn.addEventListener('click', () => {
            switchAnalysisType('car');
            document.getElementById('upload').scrollIntoView({ behavior: 'smooth' });
        });
        browseBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileUpload);
        newAnalysisBtn.addEventListener('click', resetAnalysis);
        shareResultBtn.addEventListener('click', shareResults);
        languageToggle.addEventListener('click', toggleLanguage);
        scrollDown.addEventListener('click', () => {
            document.getElementById('upload').scrollIntoView({ behavior: 'smooth' });
        });
        
        // Camera and Audio Event Listeners
        cameraBtn.addEventListener('click', openCamera);
        micBtn.addEventListener('click', startAudioRecording);
        closeCameraModal.addEventListener('click', closeCamera);
        closeAudioModal.addEventListener('click', closeAudioRecorder);
        captureBtn.addEventListener('click', captureImage);
        recordBtn.addEventListener('click', startRecording);
        stopBtn.addEventListener('click', stopRecording);
        
        // Expandable sections
        ingredientToggle.addEventListener('click', () => toggleExpandable(ingredientContent, ingredientToggle));

        // Drag and drop functionality
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('active');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('active');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('active');
            
            if (e.dataTransfer.files.length) {
                handleFileUpload({ target: { files: e.dataTransfer.files } });
            }
        });

        // Functions
        function switchAnalysisType(type) {
            currentAnalysisType = type;
            
            // Update UI for selected type
            if (type === 'product') {
                productOption.classList.add('active');
                carOption.classList.remove('active');
                uploadTitle.textContent = currentLanguage === 'ar' ? 'رفع صورة المنتج' : 'Upload Product Image';
                uploadDescription.textContent = currentLanguage === 'ar' ? 'اسحب وأفلت صورة المنتج هنا أو انقر للتصفح' : 'Drag & drop your product image here or click to browse';
                cameraBtn.style.display = 'flex';
                micBtn.style.display = 'none';
            } else {
                productOption.classList.remove('active');
                carOption.classList.add('active');
                uploadTitle.textContent = currentLanguage === 'ar' ? 'رفع صوت محرك السيارة' : 'Upload Car Engine Sound';
                uploadDescription.textContent = currentLanguage === 'ar' ? 'اسحب وأفلت التسجيل الصوتي هنا أو انقر للتصفح' : 'Drag & drop your audio recording here or click to browse';
                cameraBtn.style.display = 'none';
                micBtn.style.display = 'flex';
            }
        }

        // Camera Functions
        async function openCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' } 
                });
                cameraVideo.srcObject = stream;
                cameraModal.style.display = 'flex';
                
                // Update modal title based on language
                document.getElementById('cameraModalTitle').textContent = 
                    currentLanguage === 'ar' ? 'التقاط صورة المنتج' : 'Capture Product Image';
            } catch (error) {
                alert(currentLanguage === 'ar' 
                    ? 'تعذر الوصول إلى الكاميرا. يرجى التحقق من الأذونات.'
                    : 'Could not access camera. Please check permissions.');
                console.error('Camera error:', error);
            }
        }

        function closeCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            cameraModal.style.display = 'none';
        }

        function captureImage() {
            const context = cameraCanvas.getContext('2d');
            cameraCanvas.width = cameraVideo.videoWidth;
            cameraCanvas.height = cameraVideo.videoHeight;
            context.drawImage(cameraVideo, 0, 0);
            
            cameraCanvas.toBlob(async (blob) => {
                const file = new File([blob], `product-${Date.now()}.jpg`, { type: 'image/jpeg' });
                await handleCapturedFile(file);
                closeCamera();
            }, 'image/jpeg', 0.8);
        }

        // Audio Recording Functions
        async function startAudioRecording() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                audioModal.style.display = 'flex';
                setupAudioVisualizer();
            } catch (error) {
                alert(currentLanguage === 'ar'
                    ? 'تعذر الوصول إلى الميكروفون. يرجى التحقق من الأذونات.'
                    : 'Could not access microphone. Please check permissions.');
                console.error('Microphone error:', error);
            }
        }

        function closeAudioRecorder() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
            }
            audioModal.style.display = 'none';
            resetRecording();
        }

        function startRecording() {
            audioChunks = [];
            mediaRecorder = new MediaRecorder(stream);
            
            mediaRecorder.ondataavailable = (event) => {
                audioChunks.push(event.data);
            };
            
            mediaRecorder.onstop = async () => {
                const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                const audioUrl = URL.createObjectURL(audioBlob);
                recordedAudio.src = audioUrl;
                
                const file = new File([audioBlob], `car-sound-${Date.now()}.wav`, { type: 'audio/wav' });
                await handleCapturedFile(file);
                closeAudioRecorder();
            };
            
            mediaRecorder.start();
            recordBtn.disabled = true;
            stopBtn.disabled = false;
            startRecordingTimer();
        }

        function stopRecording() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
            }
            stopRecordingTimer();
            recordBtn.disabled = false;
            stopBtn.disabled = true;
        }

        function startRecordingTimer() {
            recordingSeconds = 0;
            recordingInterval = setInterval(() => {
                recordingSeconds++;
                const minutes = Math.floor(recordingSeconds / 60);
                const seconds = recordingSeconds % 60;
                recordingTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function stopRecordingTimer() {
            if (recordingInterval) {
                clearInterval(recordingInterval);
                recordingInterval = null;
            }
        }

        function resetRecording() {
            recordingSeconds = 0;
            recordingTimer.textContent = '00:00';
            recordBtn.disabled = false;
            stopBtn.disabled = true;
            recordedAudio.style.display = 'none';
        }

        function setupAudioVisualizer() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const analyser = audioContext.createAnalyser();
            const source = audioContext.createMediaStreamSource(stream);
            source.connect(analyser);
            
            analyser.fftSize = 256;
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            
            const canvas = audioVisualizer;
            const canvasCtx = canvas.getContext('2d');
            
            function draw() {
                if (audioModal.style.display !== 'flex') return;
                
                requestAnimationFrame(draw);
                analyser.getByteFrequencyData(dataArray);
                
                canvasCtx.fillStyle = 'rgb(255, 255, 255)';
                canvasCtx.fillRect(0, 0, canvas.width, canvas.height);
                
                const barWidth = (canvas.width / bufferLength) * 2.5;
                let barHeight;
                let x = 0;
                
                for(let i = 0; i < bufferLength; i++) {
                    barHeight = dataArray[i] / 2;
                    
                    canvasCtx.fillStyle = `rgb(${barHeight + 100}, 50, 50)`;
                    canvasCtx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);
                    
                    x += barWidth + 1;
                }
            }
            
            draw();
        }

        // File Handling
        async function handleCapturedFile(file) {
            // Show loading indicator
            loadingIndicator.style.display = 'block';
            resultsSection.style.display = 'none';
            
            try {
                // Upload to Firebase Storage
                const storageRef = storage.ref();
                const fileRef = storageRef.child(`${currentAnalysisType}/${Date.now()}_${file.name}`);
                const snapshot = await fileRef.put(file);
                const downloadURL = await snapshot.ref.getDownloadURL();
                
                console.log('File uploaded to:', downloadURL);
                
                // Simulate analysis
                setTimeout(() => {
                    loadingIndicator.style.display = 'none';
                    resultsSection.style.display = 'block';
                    
                    const fileName = file.name.split('.')[0];
                    productName.textContent = fileName;
                    
                    if (currentAnalysisType === 'product') {
                        if (fileName.toLowerCase().includes('chocolate') || fileName.toLowerCase().includes('شوكولاتة')) {
                            updateResultsForExpiredProduct();
                        } else {
                            updateResultsForSafeProduct();
                        }
                    } else {
                        updateResultsForCarAnalysis();
                    }
                    
                    resultsSection.scrollIntoView({ behavior: 'smooth' });
                }, 3000);
                
            } catch (error) {
                console.error('Upload error:', error);
                alert(currentLanguage === 'ar' 
                    ? 'حدث خطأ في رفع الملف. يرجى المحاولة مرة أخرى.'
                    : 'File upload failed. Please try again.');
                loadingIndicator.style.display = 'none';
            }
        }

        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validate file type based on analysis type
            if (currentAnalysisType === 'product' && !file.type.startsWith('image/')) {
                alert(currentLanguage === 'ar' ? 'يرجى رفع ملف صورة لتحليل المنتج.' : 'Please upload an image file for product analysis.');
                return;
            }
            
            if (currentAnalysisType === 'car' && !file.type.startsWith('audio/')) {
                alert(currentLanguage === 'ar' ? 'يرجى رفع ملف صوتي لتحليل صوت السيارة.' : 'Please upload an audio file for car sound analysis.');
                return;
            }
            
            await handleCapturedFile(file);
        }

        function updateResultsForExpiredProduct() {
            // Update for expired product
            resultMainIcon.className = 'result-icon risk';
            resultMainIcon.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
            safetyScoreCircle.className = 'score-circle risk';
            safetyScore.textContent = '42';
            
            if (currentLanguage === 'ar') {
                summaryText.textContent = 'هذا المنتج منتهي الصلاحية وقد يشكل خطراً على الصحة. يرجى عدم تناوله والتخلص منه فوراً.';
                expiredWarning.innerHTML = `
                    <i class="fas fa-exclamation-circle"></i>
                    <div>
                        <h4>تحذير: المنتج منتهي الصلاحية</h4>
                        <p>تاريخ انتهاء الصلاحية: <strong>01/2023</strong> (منتهي منذ 10 أشهر)</p>
                        <p class="mt-20">تناول المنتجات المنتهية الصلاحية قد يسبب مشاكل صحية خطيرة.</p>
                    </div>
                `;
            } else {
                summaryText.textContent = 'This product is expired and may pose a health risk. Please do not consume and dispose of it immediately.';
                expiredWarning.innerHTML = `
                    <i class="fas fa-exclamation-circle"></i>
                    <div>
                        <h4>Warning: Product Expired</h4>
                        <p>Expiration Date: <strong>01/2023</strong> (expired 10 months ago)</p>
                        <p class="mt-20">Consuming expired products may cause serious health issues.</p>
                    </div>
                `;
            }
            
            expiredWarning.style.display = 'flex';
        }

        function updateResultsForSafeProduct() {
            // Update for safe product
            resultMainIcon.className = 'result-icon safe';
            resultMainIcon.innerHTML = '<i class="fas fa-check"></i>';
            safetyScoreCircle.className = 'score-circle safe';
            safetyScore.textContent = '82';
            
            if (currentLanguage === 'ar') {
                summaryText.textContent = 'يبدو هذا المنتج آمنًا بشكل عام ولم يتم اكتشاف أي مخاطر صحية كبيرة. قد تسبب بعض المكونات ردود فعل تحسسية خفيفة لدى الأفراد الحساسين.';
            } else {
                summaryText.textContent = 'This product appears to be generally safe with no major health risks detected. Some ingredients may cause mild allergic reactions in sensitive individuals.';
            }
            
            expiredWarning.style.display = 'none';
        }

        function updateResultsForCarAnalysis() {
            // Update for car analysis
            resultMainIcon.className = 'result-icon caution';
            resultMainIcon.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
            safetyScoreCircle.className = 'score-circle caution';
            safetyScore.textContent = '65';
            
            if (currentLanguage === 'ar') {
                summaryText.textContent = 'تم اكتشاف بعض المشاكل المحتملة في صوت المحرك. يوصى بفحص السيارة في أقرب وقت ممكن.';
            } else {
                summaryText.textContent = 'Potential issues detected in engine sound. Recommended to inspect the vehicle as soon as possible.';
            }
            
            expiredWarning.style.display = 'none';
        }

        function resetAnalysis() {
            fileInput.value = '';
            resultsSection.style.display = 'none';
            document.getElementById('upload').scrollIntoView({ behavior: 'smooth' });
        }

        function shareResults() {
            alert(currentLanguage === 'ar' ? 'سيتم فتح وظيفة مشاركة النتائج هنا' : 'Results sharing functionality would open here');
            // Real implementation would generate PDF or shareable link
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
            document.documentElement.lang = currentLanguage;
            document.documentElement.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            
            if (currentLanguage === 'ar') {
                languageToggle.querySelector('span').textContent = 'العربية';
                // Update other text elements to Arabic
                document.querySelector('.hero h1').textContent = 'تحليل السلامة باستخدام الذكاء الاصطناعي';
                document.querySelector('.hero p').textContent = 'قم برفع صورة المنتج أو تسجيل صوت محرك سيارتك للحصول على تحليل فوري للسلامة!';
                document.getElementById('scanProductBtn').innerHTML = '<i class="fas fa-cube"></i> مسح منتج';
                document.getElementById('scanCarBtn').innerHTML = '<i class="fas fa-car"></i> تحليل صوت السيارة';
                document.querySelectorAll('.feature h3')[0].textContent = 'سلامة المنتجات';
                document.querySelectorAll('.feature h3')[1].textContent = 'تشخيص السيارات';
                document.querySelectorAll('.feature p')[0].textContent = 'تحقق من المكونات، المواد المسببة للحساسية، وتواريخ انتهاء الصلاحية للأغذية والمشروبات ومستحضرات التجميل.';
                document.querySelectorAll('.feature p')[1].textContent = 'تحليل أصوات المحرك للكشف عن المشاكل الميكانيكية المحتملة قبل أن تصبح خطيرة.';
                document.querySelector('.section-title h2').textContent = 'رفع الملف للتحليل';
                document.querySelector('.section-title p').textContent = 'اختر نوع التحليل وارفع صورة أو ملف صوتي للحصول على تقييم فوري للسلامة';
                document.querySelector('.scroll-down span').textContent = 'مرر للأسفل';
                // Update upload section based on current analysis type
                switchAnalysisType(currentAnalysisType);
            } else {
                languageToggle.querySelector('span').textContent = 'English';
                // Update other text elements to English
                document.querySelector('.hero h1').textContent = 'AI-Powered Safety Analysis';
                document.querySelector('.hero p').textContent = 'Upload your product image or record your car engine sound to get instant safety analysis!';
                document.getElementById('scanProductBtn').innerHTML = '<i class="fas fa-cube"></i> Scan Product';
                document.getElementById('scanCarBtn').innerHTML = '<i class="fas fa-car"></i> Analyze Car Sound';
                document.querySelectorAll('.feature h3')[0].textContent = 'Product Safety';
                document.querySelectorAll('.feature h3')[1].textContent = 'Car Diagnostics';
                document.querySelectorAll('.feature p')[0].textContent = 'Check ingredients, allergens, and expiration dates for food, beverages, and cosmetics.';
                document.querySelectorAll('.feature p')[1].textContent = 'Analyze engine sounds to detect potential mechanical issues before they become serious.';
                document.querySelector('.section-title h2').textContent = 'Upload for Analysis';
                document.querySelector('.section-title p').textContent = 'Select your analysis type and upload an image or audio file for instant safety evaluation';
                document.querySelector('.scroll-down span').textContent = 'Scroll Down';
                // Update upload section based on current analysis type
                switchAnalysisType(currentAnalysisType);
            }
        }

        function toggleExpandable(content, toggle) {
            const isExpanded = content.style.display === 'block';
            content.style.display = isExpanded ? 'none' : 'block';
            
            const icon = toggle.querySelector('i');
            icon.className = isExpanded ? 'fas fa-chevron-down' : 'fas fa-chevron-up';
        }

        // API Integration Functions
        async function analyzeFile(file) {
            // This is a placeholder for the actual implementation
            const formData = new FormData();
            formData.append("file", file);

            try {
                const response = await fetch("https://api.gemini2.5.com/analyze", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${GEMINI_API_KEY}`
                    },
                    body: formData
                });

                const result = await response.json();
                return result;
            } catch (error) {
                console.error("Error analyzing file:", error);
                return null;
            }
        }
    </script>
</body>
</html>
